<div class="page-container">
  <div class="breadcrumb">
    <span nz-icon nzType="home"></span>
    <span class="separator">/</span>
    <span class="current">Projects</span>
  </div>
  
  <div class="page-header">
    <div class="header-content">
      <div class="title-section">
        <span nz-icon nzType="project" class="title-icon"></span>
        <div>
          <h1>Project Management</h1>
          <p class="subtitle">Manage and monitor all transformation projects</p>
        </div>
      </div>
      <button nz-button nzType="primary" (click)="showCreateModal()">
        <span nz-icon nzType="plus"></span>
        Add New Project
      </button>
    </div>
  </div>
  
  <div class="stats-container">
    <div class="stat-card">
      <div class="stat-icon total">
        <span nz-icon nzType="folder"></span>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ totalProjects }}</span>
        <span class="stat-label">Total Projects</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon active">
        <span nz-icon nzType="check-circle"></span>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ activeProjects }}</span>
        <span class="stat-label">Active</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon completed">
        <span nz-icon nzType="trophy"></span>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ completedProjects }}</span>
        <span class="stat-label">Completed</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon inactive">
        <span nz-icon nzType="stop"></span>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ inactiveProjects }}</span>
        <span class="stat-label">Inactive</span>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon on-hold">
        <span nz-icon nzType="pause-circle"></span>
      </div>
      <div class="stat-content">
        <span class="stat-value">{{ onHoldProjects }}</span>
        <span class="stat-label">On Hold</span>
      </div>
    </div>
  </div>
  
  <nz-table #projectTable [nzData]="projects" [nzLoading]="loading">
    <thead>
      <tr>
        <th>Code</th>
        <th>Name</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Status</th>
        <th nzWidth="120px">Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let project of projectTable.data">
        <td>{{ project.code || '-' }}</td>
        <td>{{ project.name }}</td>
        <td>{{ project.startDate ? (project.startDate | date: 'dd MMM yyyy') : '-' }}</td>
        <td>{{ project.endDate ? (project.endDate | date: 'dd MMM yyyy') : '-' }}</td>
        <td>
          <nz-tag [nzColor]="getStatusColor(project.status)">
            {{ project.status }}
          </nz-tag>
        </td>
        <td>
          <button nz-button nzType="link" nzSize="small" (click)="viewProject(project)" title="View details">
            <span nz-icon nzType="eye"></span>
          </button>
          <button nz-button nzType="link" nzSize="small" (click)="showEditModal(project)" title="Edit">
            <span nz-icon nzType="edit"></span>
          </button>
          <button 
            nz-button 
            nzType="link" 
            nzSize="small" 
            nzDanger
            nz-popconfirm
            nzPopconfirmTitle="Are you sure you want to delete this project?"
            nzPopconfirmPlacement="topRight"
            (nzOnConfirm)="deleteProject(project)"
            title="Delete"
          >
            <span nz-icon nzType="delete"></span>
          </button>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>

<app-project-form-modal
  [(visible)]="isModalVisible"
  [project]="selectedProject"
  (onSuccess)="handleModalSuccess()"
></app-project-form-modal>
